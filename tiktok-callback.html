<!DOCTYPE html>
  <html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>vibeIn - TikTok Authentication</title>
      <style>
          body {
              font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
  Roboto, Helvetica, Arial, sans-serif;
              display: flex;
              justify-content: center;
              align-items: center;
              min-height: 100vh;
              margin: 0;
              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          }
          .container {
              background: white;
              padding: 40px;
              border-radius: 20px;
              box-shadow: 0 20px 60px rgba(0,0,0,0.3);
              text-align: center;
              max-width: 400px;
          }
          h1 {
              color: #333;
              margin-bottom: 10px;
              background: linear-gradient(135deg, #667eea, #764ba2);
              -webkit-background-clip: text;
              -webkit-text-fill-color: transparent;
              background-clip: text;
          }
          p { color: #666; margin: 15px 0; }
          .spinner {
              border: 4px solid #f3f3f3;
              border-top: 4px solid #667eea;
              border-radius: 50%;
              width: 40px;
              height: 40px;
              animation: spin 1s linear infinite;
              margin: 20px auto;
          }
          @keyframes spin {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
          }
          .success { color: #28a745; font-size: 48px; margin: 20px 0; }
          .button {
              background: linear-gradient(135deg, #667eea, #764ba2);
              color: white;
              border: none;
              padding: 15px 30px;
              border-radius: 10px;
              font-size: 16px;
              font-weight: 600;
              cursor: pointer;
              margin-top: 20px;
              text-decoration: none;
              display: inline-block;
          }
          .button:hover { opacity: 0.9; }
      </style>
  </head>
  <body>
      <div class="container">
          <h1>✨ vibeIn</h1>
          <div class="spinner" id="spinner"></div>
          <div class="success" id="checkmark" style="display:none;">✅</div>
          <p id="message">Connecting with TikTok...</p>
          <a href="#" id="openApp" class="button" style="display:none;">Open
   vibeIn App</a>
      </div>

      <script>
          var params = new URLSearchParams(window.location.search);
          var code = params.get('code');
          var state = params.get('state');
          var error = params.get('error');

          if (error) {
              document.getElementById('spinner').style.display = 'none';
              document.getElementById('checkmark').style.display = 'block';
              document.getElementById('checkmark').textContent = '❌';
              document.getElementById('message').textContent =
  'Authentication cancelled';
          } else if (code) {
              // Build the app URL
              var appURL = 'vibein://tiktok/callback?code=' +
  encodeURIComponent(code) + '&state=' + encodeURIComponent(state || '');

              // Show success message
              document.getElementById('spinner').style.display = 'none';
              document.getElementById('checkmark').style.display = 'block';
              document.getElementById('message').textContent =
  'Authentication successful!';

              // Set up the button
              var button = document.getElementById('openApp');
              button.href = appURL;
              button.style.display = 'inline-block';

              // Try automatic redirect
              window.location.href = appURL;

              // Also try after a delay
              setTimeout(function() {
                  window.location.href = appURL;
              }, 500);
          } else {
              document.getElementById('spinner').style.display = 'none';
              document.getElementById('checkmark').style.display = 'block';
              document.getElementById('checkmark').textContent = '❌';
              document.getElementById('message').textContent = 'Invalid 
  callback - missing code';
          }
      </script>
  </body>
  </html>
